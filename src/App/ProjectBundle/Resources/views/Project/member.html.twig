{% extends 'AppProjectBundle:Project:layout.html.twig' %}

{% set nav_title = 'members'|trans({}, 'Project') %}


{% block actions %}

    {% block actions_nav_block %}
        {% set nav_title = nav_title|default('Project members') %}
        {% set route_prefix = 'backend_project' %}
        {# {% include 'AppBackendBundle:Settings:nav.html.twig' %} #}

    {% set pid = app.request.attributes.get('pid') %}

    <div class="title-header">
        <div class="row">
            <div class="col-md-12">
                <div class="col-md-3 h3">
                    <h3>{{ nav_title|default('Title') }}</h3>
                </div>
                
            </div>

        </div>
    </div>

    {% endblock %}

    {% block actions_main %}

        <div class="action-view">
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        {% if pid is defined %}
                            {% include 'AppProjectBundle:Project:sideBar.html.twig' with {'id': pid} %}
                        {% endif %}

                        <div class="col-md-9">
                            <form class="form-horizontal" id="project-member-form" action="" method="post" {{ form_enctype(form) }} >
                                {{ form_widget(form._token) }}
                                <div class="form-group">
                                    {{ form_label(form.client) }}
                                    <div class="form-group">{{ form_widget(form.client) }} {{ form_errors(form.client) }}</div>
                                </div>
                                <div class="form-group">
                                    {{ form_label(form.manager) }}
                                    <div class="form-group">{{ form_widget(form.manager) }} {{ form_errors(form.manager) }}</div>
                                </div>
                                 <div class="form-group">
                                    {{ form_label(form.members) }}
                                    <div class="form-group">{{ form_widget(form.members) }} {{ form_errors(form.members) }}</div>
                                </div>
                                <div class="form-group">
                                    <div class="form-group">
                                         <img src="/images/spacer.png" width='10' height='1'/><input class="btn btn-primary" type="submit" name="submit_project_members" value="Save"/>
                                    </div>
                                </div>
                            </form>
                            
                            <div><b>{{ 'client'|trans({}, 'Project') }}:</b></div>
                            <div>
                                {% include 'AppUserBundle:User:indexBase.html.twig' with { 'entities': client }  %}
                            </div>

                            <div><b>{{ 'manager'|trans({}, 'Project') }}:</b></div>
                            <div>
                                {% include 'AppUserBundle:User:indexBase.html.twig' with { 'entities': manager }  %}
                            </div>

                            <div><b>{{ 'participants'|trans({}, 'Project') }}:</b></div>
                            <div>{% include 'AppUserBundle:User:indexBase.html.twig'  with {'hideDataTable': true} %}</div>

                        </div>
                        
                    </div>
                </div>
            </div>
        </div>

    {% endblock %}

{% endblock %}

{% block user_js %}
    <script src="{{ asset('js/jquery/plugins/select2/select2.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/appcore/js/app.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/appform/form_admin.js') }}" type="text/javascript"></script>
    <script src="{{ asset('js/jquery/plugins/jquery.dotimeout.js') }}" type="text/javascript"></script>

    <script>
        jQuery(function($) {
            Admin.setup_collections(document);
            Admin.bind_widgets();
        });
    </script>

{% endblock %}

{% block user_css %}

    <link href="{{ asset('js/jquery/plugins/select2/select2.css') }}" type="text/css" rel="stylesheet">
    <link href="{{ asset('js/jquery/plugins/select2/select2-bootstrap.css') }}" type="text/css" rel="stylesheet">
    {{ parent() }}
{% endblock %}