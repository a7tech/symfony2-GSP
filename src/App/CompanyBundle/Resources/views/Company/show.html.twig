{% extends 'AppBackendBundle::base.html.twig' %}

{% block bottom %}

    <div class="tab-content">
        <div class="tab-pane active">
            <ul class="nav nav-pills">

                <li class="
                                {% if app.request.attributes.get('_route')|slice(0,15)=='backend_company' %}
                                    active
                                {% endif %}"><a href="{{ path('backend_company') }}">Companies</a></li>


            </ul>
        </div>
    </div>
{% endblock %}

{% block actions %}
    <div class="title-header">
        <div class="row">
            <div class="col-md-12">
                <div class="col-md-3 h3">
                    <h3>Company overview</h3>
                </div>
                <div class="col-md-5">
                    <div class="crud-actions">
                        <ul class="nav-crud">
                            <li>
                                <a href="{{ path('backend_company') }}" title="List">
                                    <i class="icon-crud-list"></i>

                                    <div>
                                        <label>List</label>
                                    </div>
                                </a>
                            </li>
                            <li class="" id="new">
                                <a href="{{ path('backend_company_new') }}" title="New">
                                    <i class="icon-crud-new"></i>

                                    <div>
                                        <label>New</label>
                                    </div>
                                </a>
                            </li>
                            <li class="crud active" id="show">
                                <a title="Show">
                                    <i class="icon-crud-show"></i>

                                    <div>
                                        <label>Show</label>
                                    </div>
                                </a>
                            </li>
                            <li class="crud " id="edit">
                                <a href="{{ path('backend_company_edit', {'id':entity.id}) }}" title="Edit">
                                    <i class="icon-crud-edit"></i>

                                    <div>
                                        <label>Edit</label>
                                    </div>
                                </a>
                            </li>
                            <li class="crud " id="delete">
                                <a href="{{ path('backend_company_delete', {'id':entity.id}) }}" title="Delete">
                                    <i class="icon-crud-delete"></i>

                                    <div>
                                        <label>Delete</label>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-search">
                        <div class="col-xs-10 col-sm-5 col-md-7">
                            <input type="text" class="form-control">
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <button type="submit" class="btn btn-default">Search</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>



    <div class="action-view">
    <div class="row">
    <div class="col-md-12">
    <div class="row">
    <div class="col-md-3">
        <div class="left-menu">
            <ul id="product-tabs" class="left-nav-tabs nav nav-pills nav-stacked" data-spy="affix-top">
                <li><a href="#tab-profile-info">Company info</a></li>
                <li><a href="#tab-profile-business">Business info</a></li>
                <li><a href="#tab-profile-details">Company details</a></li>
                <li><a href="#tab-profile-employment">Employees</a></li>
            </ul>
        </div>
    </div>
    <div class="col-md-9">
    <h3 id="tab-profile-info" class="h3-form">Company info</h3>

    <div class="contact-card">
        <div class="top-card">
            <div class="row">
                <div class="col-md-2 contact-card">
                    {% if entity.images|length>0 %}
                        {{ entity.images[0].image|vlabs_filter('resize', {'width': 100, 'height': 70})|vlabs_media('image') }}
                    {% else %}
                        <img src="/images/company_100px_grey_979797.png">
                    {% endif %}
                </div>
                <div class="col-md-10">
                    <div class="row">
                        <div id="tab-contact-info" class="col-md-5">
                            <strong>ID: {{ entity.id }} - {{ entity.name }}</strong>
                        </div>
                        <div class="col-md-4">
                            {% if entity.companyType|length>0 %}
                                <strong>Company profile :</strong> {{ entity.companyType }}
                            {% endif %}
                        </div>
                        <div class="col-md-3">
                            {% if entity.creationDate|length>0 %}
                                <i class="icon-contact-birthday"></i>{{ entity.creationDate|date('d F Y') }}
                            {% endif %}
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            {% if entity.sector|length>0 %}
                                <strong>Sector:</strong> {{ entity.sector }}
                            {% endif %}
                        </div>
                        <div class="col-md-7">
                            {% if entity.specialities|length>0 %}
                                <strong>Specialities:</strong>
                                {% for sp in entity.specialities %}
                                    {{ sp }}
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="rest-card">
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-6">

                            <div class="row phones">
                                {% if entity.phones|length>0 %}
                                    {% for email in entity.phones %}
                                        {% if email.phoneType=='Mobile' or email.phoneType=='mobile' %}
                                            <i class="icon-contact-cell"></i>
                                        {% else %}
                                            <i class="icon-contact-phone"></i>
                                        {% endif %}
                                        {{ email }}
                                        {% if (email.phoneType|length>0) %}
                                            ({{ email.phoneType }})
                                        {% endif %}
                                        <br/>
                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row addresses">
                                {% if entity.addresses|length>0 %}
                                    {% set suite_label = 'suite'|trans({}, 'Address')~':' %}

                                    {% for address in entity.addresses %}
                                        <i class="icon-contact-address"></i>
                                        {{ address.formatted(suite_label)|raw }}
                                        <br>
                                        <i class="icon-contact-google_maps"></i> <a href="">Show address in the map</a><br><br>
                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    {% if entity.description|length>0 %}
                        <strong>Description:</strong>
                        {{ entity.description|raw }}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <h3 id="tab-profile-business" class="h3-form">Business info</h3>

    <div class="contact-card">
        {% if entity.rbq|length>0 %}
            <dl class="dl-horizontal">
                <dt>RBQ:</dt>
                <dd>{{ entity.rbq }}</dd>
            </dl>
        {% endif %}
        {% if entity.licenses|length>0 %}
            <dl class="dl-horizontal">
                <dt>Licences, etc:</dt>
                <dd>
                    {% for sm in entity.licenses %}

                        {% if sm.licenseType|length>0 %}{{ sm.licenseType }}:{% endif %} {{ sm.code }}<br/>
                    {% endfor %}
                </dd>
            </dl>
        {% endif %}

        {% if entity.groups|length>0 %}
            <dl class="dl-horizontal">
                <dt>Company Groups:</dt>
                <dd>
                    {% for sm in entity.groups %}

                        {{ sm }}<br/>
                    {% endfor %}
                </dd>
            </dl>
        {% endif %}
        {% if entity.brandGroups|length>0 %}
            <dl class="dl-horizontal">
                <dt>Brand Groups:</dt>
                <dd>
                    {% for sm in entity.brandGroups %}

                        {{ sm }}<br/>
                    {% endfor %}
                </dd>
            </dl>
        {% endif %}
        {% if entity.categories|length>0 %}
            <dl class="dl-horizontal">
                <dt>Categories:</dt>
                <dd>
                    {% for sm in entity.categories %}

                        {{ sm.title }}<br/>
                    {% endfor %}
                </dd>
            </dl>
        {% endif %}
    </div>

    <h3 id="tab-profile-details" class="h3-form">Company details</h3>

    <div class="contact-card">


        {% if entity.socialMedias|length>0 %}
            <dl class="dl-horizontal">
                <dt>Socila Media:</dt>
                <dd>
                    {% for sm in entity.socialMedias %}

                        {{ sm.socialMediaType }}: {{ sm.content }}<br/>
                    {% endfor %}
                </dd>
            </dl>
        {% endif %}
    </div>

    <h3 id="tab-profile-employment" class="h3-form">Employees</h3>

    <div class="contact-card">

        {% if entity.employments|length>0 %}
            <table class="table">
                <thead>
                <th>Id</th>
                <th>Name</th>
                <th>Gender</th>
                <th>Conntact Group</th>
                <th>Department</th>
                <th>Role</th>
                </thead>
                <tbody>
                {% for em in entity.employments %}
                    <tr>
                        <td>{{ em.person.id }}</td>
                        <td>
                            <a href="{{ path('backend_person_show', {'id':em.person.id}) }}">{{ em.person.firstName }} {{ em.person.lastName }}</a>
                        </td>
                        <td>{% if em.person.gender=='m' %}
                                <i class="icon-contact-sex_male" style=""></i>Male
                            {% elseif em.person.gender=='f' %}
                                <i class="icon-contact-sex_female" style=""></i>Female
                            {% else %}
                                <br/>
                            {% endif %}
                        </td>
                        <td>
                            {% for gr in em.person.personGroup %}
                                {{ gr }}<br/>
                            {% endfor %}
                        </td>
                        <td>{{ em.department }}</td>
                        <td>{{ em.role }}</td>
                    </tr>

                {% endfor %}
                </tbody>
            </table>
        {% endif %}
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
{% endblock %}
{% block user_js %}

{% endblock %}
