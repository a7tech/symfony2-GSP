{% extends 'AppProductBundle:Product:layout.html.twig' %}

{% set nav_title = entity.id ? 'Product edit' : 'Product new' %}

{% block actions_main %}
    <div class="action-view">
        <form class="form-horizontal" id="product-form" action="" method="post" {{ form_enctype(form) }}>
            
            {{ form_widget(form) }}
            <div class="row form-groups">
                <div class="col-md-3"></div>
                <div class="col-md-9">
                    <div class="form-actions well">
                        <input class="btn btn-primary" type="submit" value="Save">
                    </div>
                </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block user_js %}
    <script src="{{ asset('bundles/appform/form_admin.js') }}" type="text/javascript"></script>
    <script>
        jQuery(function($) {
            Admin.setup_collections(document);

            function onProductTypeChange() {
                
                var isStockable = $("select[id$='productType'] option:selected").html().substr(0,8);
                if (isStockable=='Physical') {
                    $('#btn-weight-size').show();
                    $('#tab-weight-size').show();
                    $('#product_form_width').parent().parent().show();
                    $('#product_form_height').parent().parent().show();
                    $('#product_form_depth').parent().parent().show();
                    $('#product_form_weight').parent().parent().show();
                } else {
                    $('#btn-weight-size').hide();
                    $('#tab-weight-size').hide();
                    $('#product_form_width').parent().parent().hide();
                    $('#product_form_height').parent().parent().hide();
                    $('#product_form_depth').parent().parent().hide();
                    $('#product_form_weight').parent().parent().hide();
                }
            }
            $("select[id$='productType']").change(onProductTypeChange);
            onProductTypeChange();
        });
    </script>
{% endblock %}