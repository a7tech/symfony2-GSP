{% block email_autocomplete_widget %}
    <input type="text" id="{{ id ~ '_autocomplete' }}"/>
    <script src="{{ asset('bundles/appform/autocomplete_widget.js') }}" type="text/javascript"></script>
    <script>
        $(function() {
            var $input = $("#{{ id ~ '_autocomplete' }}");
            var form_vars = {
                input: $input,
                addNew: false,
                full_name: '{{ full_name }}',
                choices: {{ choices|json_encode|raw }},
                value: {{ value|json_encode|raw }}
            };


            AutocompleteWidget.class(form_vars);
            var emailCategoryWidget = new AutocompleteWidget.class(form_vars);
            $input.data('email-autocomplete-widget', emailCategoryWidget);
        });
    </script>
{% endblock %}

{% block user_autocomplete_widget %}
    <input type="text" id="{{ id ~ '_autocomplete' }}"/>
    <script src="{{ asset('bundles/appform/autocomplete_widget.js') }}" type="text/javascript"></script>
    <script>

        $(function() {

            var $input = $("#{{ id ~ '_autocomplete' }}");
            var form_vars = {
                input: $input,
                addNew: false,
                full_name: '{{ full_name }}',
                choices: {{ choices|json_encode|raw }},
                value: {{ value|json_encode|raw }}
            };          

            AutocompleteWidget.class(form_vars);
            var userCategoryWidget = new AutocompleteWidget.class(form_vars);
            $input.data('user-autocomplete-widget', userCategoryWidget);
        });
    </script>
{% endblock %}